===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\bin\Debug\net9.0-windows10.0.19041.0\win10-x64\Microsoft.UI.Xaml =====




===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Interface\IPlatformLogger.cs =====

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MyFirstAppMobile.Interface
{
    public interface IPlatformLogger
    {
        void Log(string message);
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Models\FitnessEntry.cs =====

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MyFirstAppMobile.Models
{
    public class FitnessEntry
    {
        public Guid Id { get; set; } = Guid.NewGuid();
        public DateTime Date { get; set; } = DateTime.Today;
        public string ActivityType { get; set; } = "";
        public int DurationMinutes { get; set; }
        public string Notes { get; set; } = "";
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\Android\AndroidLogger.cs =====

using MyFirstAppMobile.Interface;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Alog = Android.Util;

namespace MyFirstAppMobile.Platforms.Android
{
    public class AndroidLogger : IPlatformLogger
    {
        public void Log(string message)
        {
            Alog.Log.Debug("ANDROIDLOG", message);
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\Android\MainActivity.cs =====

using Android.App;
using Android.Content.PM;
using Android.OS;

namespace MyFirstAppMobile
{
    [Activity(Theme = "@style/Maui.SplashTheme", MainLauncher = true, LaunchMode = LaunchMode.SingleTop, ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.Orientation | ConfigChanges.UiMode | ConfigChanges.ScreenLayout | ConfigChanges.SmallestScreenSize | ConfigChanges.Density)]
    public class MainActivity : MauiAppCompatActivity
    {
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\Android\MainApplication.cs =====

using Android.App;
using Android.Runtime;

namespace MyFirstAppMobile
{
    [Application]
    public class MainApplication : MauiApplication
    {
        public MainApplication(IntPtr handle, JniHandleOwnership ownership)
            : base(handle, ownership)
        {
        }

        protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\iOS\AppDelegate.cs =====

using Foundation;

namespace MyFirstAppMobile
{
    [Register("AppDelegate")]
    public class AppDelegate : MauiUIApplicationDelegate
    {
        protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\iOS\Program.cs =====

using ObjCRuntime;
using UIKit;

namespace MyFirstAppMobile
{
    public class Program
    {
        // This is the main entry point of the application.
        static void Main(string[] args)
        {
            // if you want to use a different Application Delegate class from "AppDelegate"
            // you can specify it here.
            UIApplication.Main(args, null, typeof(AppDelegate));
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\MacCatalyst\AppDelegate.cs =====

using Foundation;

namespace MyFirstAppMobile
{
    [Register("AppDelegate")]
    public class AppDelegate : MauiUIApplicationDelegate
    {
        protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\MacCatalyst\Program.cs =====

using ObjCRuntime;
using UIKit;

namespace MyFirstAppMobile
{
    public class Program
    {
        // This is the main entry point of the application.
        static void Main(string[] args)
        {
            // if you want to use a different Application Delegate class from "AppDelegate"
            // you can specify it here.
            UIApplication.Main(args, null, typeof(AppDelegate));
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\Tizen\Main.cs =====

using System;
using Microsoft.Maui;
using Microsoft.Maui.Hosting;

namespace MyFirstAppMobile
{
    internal class Program : MauiApplication
    {
        protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();

        static void Main(string[] args)
        {
            var app = new Program();
            app.Run(args);
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\Windows\App.xaml =====

<maui:MauiWinUIApplication
    x:Class="MyFirstAppMobile.WinUI.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:maui="using:Microsoft.Maui"
    xmlns:local="using:MyFirstAppMobile.WinUI">

</maui:MauiWinUIApplication>



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\Platforms\Windows\App.xaml.cs =====

using Microsoft.UI.Xaml;

// To learn more about WinUI, the WinUI project structure,
// and more about our project templates, see: http://aka.ms/winui-project-info.

namespace MyFirstAppMobile.WinUI
{
    /// <summary>
    /// Provides application-specific behavior to supplement the default Application class.
    /// </summary>
    public partial class App : MauiWinUIApplication
    {
        /// <summary>
        /// Initializes the singleton application object.  This is the first line of authored code
        /// executed, and as such is the logical equivalent of main() or WinMain().
        /// </summary>
        public App()
        {
            this.InitializeComponent();
        }

        protected override MauiApp CreateMauiApp() => MauiProgram.CreateMauiApp();
    }

}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\ViewModels\EntriesViewModel.cs =====

using CommunityToolkit.Mvvm.ComponentModel;
using MyFirstAppMobile.Models;
using System.Collections.ObjectModel;
using System.Windows.Input;

namespace MyFirstAppMobile.ViewModels
{
    public class EntriesViewModel : ObservableObject
    {
        public ObservableCollection<FitnessEntry> Entries { get; set; } = new();

        public EntriesViewModel()
        {
            //Fake seed
            Entries.Add(new FitnessEntry() { ActivityType = "Activity A", DurationMinutes = 5, Notes = "Une note" });
        }

        public async Task Add()
        {
            await Shell.Current.GoToAsync(nameof(EntryPage));
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\App.xaml =====

<?xml version = "1.0" encoding = "UTF-8" ?>
<Application xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MyFirstAppMobile"
             x:Class="MyFirstAppMobile.App">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Styles/Colors.xaml" />
                <ResourceDictionary Source="Resources/Styles/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application>



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\App.xaml.cs =====

using System.Diagnostics;

namespace MyFirstAppMobile
{
    public partial class App : Application
    {
        public App()
        {
            InitializeComponent();
        }

        protected override Window CreateWindow(IActivationState? activationState)
        {
            return new Window(new AppShell());
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\AppShell.xaml =====

<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="MyFirstAppMobile.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:MyFirstAppMobile"
    Title="MyFirstAppMobile">

    <ShellContent
        Title="Home"
        ContentTemplate="{DataTemplate local:MainPage}"
        Route="MainPage" />

</Shell>



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\AppShell.xaml.cs =====

namespace MyFirstAppMobile
{
    public partial class AppShell : Shell
    {
        public AppShell()
        {
            InitializeComponent();

            Routing.RegisterRoute(nameof(EntryPage), typeof(EntryPage));
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\DefaultLogger.cs =====

using MyFirstAppMobile.Interface;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MyFirstAppMobile
{
    public class DefaultLogger : IPlatformLogger
    {
        public void Log(string message)
        {
            Debug.WriteLine(message);
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\EntryPage.xaml =====

<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MyFirstAppMobile.EntryPage"
             Title="EntryPage">
    <VerticalStackLayout>
        <Label 
            Text="Welcome to .NET MAUI!"
            VerticalOptions="Center" 
            HorizontalOptions="Center" />
    </VerticalStackLayout>
</ContentPage>



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\EntryPage.xaml.cs =====

using MyFirstAppMobile.Models;
using MyFirstAppMobile.ViewModels;

namespace MyFirstAppMobile;

public partial class EntryPage : ContentPage
{
	public EntryPage(EntriesViewModel viewModel)
	{
		InitializeComponent();
		BindingContext = viewModel;
	}
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\LifecycleLogger.cs =====

using MyFirstAppMobile.Interface;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MyFirstAppMobile;

public class LifecycleLogger
{
    private readonly IPlatformLogger _logger;

    public LifecycleLogger(IPlatformLogger logger)
    {
        _logger = logger;
    }

    public void Log(string messsage) => _logger.Log(messsage);
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\MainPage.xaml =====

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MyFirstAppMobile.MainPage">

    <VerticalStackLayout Padding="16" Spacing="12">

        <Button Text="Nouvelle entrée"
                Command="{Binding AddCommand}" />

        <CollectionView ItemsSource="{Binding Entries}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <VerticalStackLayout Padding="12">
                        <Label Text="{Binding ActivityType}" FontSize="18"/>
                        <Label Text="{Binding DurationMinutes, StringFormat='Durée: {0} min'}" />
                        <Label Text="{Binding Date, StringFormat='Date: {0:dd/MM/yyyy}'}" />
                        <Label Text="{Binding Notes}" FontAttributes="Italic"/>
                    </VerticalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </VerticalStackLayout>
</ContentPage>



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\MainPage.xaml.cs =====

using MyFirstAppMobile.ViewModels;
using System.Windows.Input;

namespace MyFirstAppMobile
{
    public partial class MainPage : ContentPage
    {
        public MainPage()
        {
            InitializeComponent();
            BindingContext = new EntriesViewModel();
        }
    }
}



===== C:\Users\rverger\source\repos\MyFirstAppMobile\MyFirstAppMobile\MauiProgram.cs =====

using Microsoft.Extensions.Logging;
using Microsoft.Maui.LifecycleEvents;
using MyFirstAppMobile.Interface;
using MyFirstAppMobile.ViewModels;


namespace MyFirstAppMobile
{
    public static class MauiProgram
    {
        public static MauiApp CreateMauiApp()
        {

            var builder = MauiApp.CreateBuilder();
#if ANDROID
            builder.Services.AddSingleton<IPlatformLogger, Platforms.Android.AndroidLogger>();
#else
            builder.Services.AddSingleton<IPlatformLogger, DefaultLogger>();
#endif
            builder.Services.AddSingleton<LifecycleLogger>();
            builder.Services.AddSingleton<EntriesViewModel>();
            builder.Services.AddTransient<EntryPage>();

            builder.UseMauiApp<App>()
                .ConfigureFonts(fonts =>
                {
                    fonts.AddFont("OpenSans-Regular.ttf", "OpenSansRegular");
                    fonts.AddFont("OpenSans-Semibold.ttf", "OpenSansSemibold");
                });

            builder.ConfigureLifecycleEvents(events =>
            {
#if ANDROID
            events.AddAndroid(android =>
            {
                android.OnCreate((activity, bundle) =>
                    builder.Services.BuildServiceProvider()
                        .GetRequiredService<IPlatformLogger>()
                        .Log("Activity OnCreate"));
            });
#endif
            });

#if DEBUG
            builder.Logging.AddDebug();
#endif
            return builder.Build();
        }
    }
}



